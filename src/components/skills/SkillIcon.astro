---
import { Image } from 'astro:assets';
import { iconMap } from '../iconMap';
import SkillIconTitle from './SkillIconTitle';

interface Props {
  className?: string;
  alt: string;
  rank?: 'rainbow' | 'gold' | 'silver' | 'bronze';
}

const { className = '', alt, rank } = Astro.props;
const image = iconMap[alt];
const isIconAvailable = !!image;
const rankClass = rank ? `bg-${rank}` : 'bg-gray-300/25';
const hasBorder = rank ? 'border-1 border-black/25' : 'border-1 border-black/25 opacity-50';
---

<li
  class={`${hasBorder} ${rankClass} mb-[1em] flex h-12.5 w-12.5 flex-col items-center gap-1 rounded-2xl`}
>
  {
    isIconAvailable ? (
      <Image
        class={`block shrink-0 rounded-2xl border-5 border-white/0 align-baseline ${className}`}
        loading="eager"
        alt={`${alt} icon`}
        src={image}
        width={50}
        height={50}
      />
    ) : (
      <span class={`block h-12.5 w-12.5 shrink-0 rounded-xl bg-gray-500 opacity-50 ${className}`} />
    )
  }
  <SkillIconTitle title={alt} client:load />
</li>
